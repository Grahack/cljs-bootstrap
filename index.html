<!--
Copyright (c) 2014 Joel Martin
Copyright (c) 2012, 2013 Fogus and Relevance Inc. All rights reserved.  The
use and distribution terms for this software are covered by the Eclipse
Public License 1.0 (http://opensource.org/licenses/eclipse-1.0.php)
which can be found in the file COPYING the root of this
distribution.  By using this software in any fashion, you are
agreeing to be bound by the terms of this license.  You must not
remove this notice, or any other, from this software.
-->

<html>
<head>
  <link rel="stylesheet" type="text/css" href="web/base.css" />
  <link rel="stylesheet" type="text/css" href="web/layout.css" />
  <link rel="stylesheet" type="text/css" href="web/skeleton.css" />
  <link rel="stylesheet" type="text/css" href="web/himera.css" />
  <link rel="stylesheet" type="text/css" href="web/ansi.css" />
  <link rel="stylesheet" type="text/css" href="web/console.css" />
  <style type="text/css" media="screen">
  </style>
  <title>cljs-bootstrap Web REPL</title>
</head>
<body>
  <div class="container">
    <h1 id="title"><a href="https://github.com/kanaka/cljs-bootstrap"/>cljs-bootstrap</a></h1>
    
    <h2>cljs-bootstrap Web REPL</h2>

    <div id="console-container" class="sixteen columns">
    <div class="console" id="console"></div>
    </div>
    <div class="eight columns">
    <!--
    <h3><span style="cursor: pointer" class="doc-link" id="toggle-editor">Show file editor</span></h3>
    -->
    <h3><span style="cursor: pointer" class="doc-link">&nbsp;</span></h3>
    </div>
    <div class="eight columns">
    <div class="source">
      <a href="http://github.com/kanaka/cljs-bootstrap">View source on Github <img src="web/github-icon.png" /></a></p>
    </div><!-- /source -->
    </div>
    
    <div class="rule sixteen columns"></div>

	  <div class="sixteen columns">
    <h3>ClojureScript at a glance - <a href="https://github.com/fogus/clojurescript-cheatsheet/blob/master/cljs-cheatsheet.pdf?raw=true" class="doc-link">PDF</a> | <a href="http://clojuredocs.org/" class="doc-link">Searchable docs</a></h3>
    </div>
    
    <div class="cheat-box-container eight columns">
      <div class="cheat-box">
        <h4>Datatypes</h4>
        <table>
          <tr class="row-one">
            <td class="row-label">Map</td>
            <td>{:key1 :val1, :key2 :val2}</td>
          </tr>
          <tr>
            <td class="row-label">Vectors</td>
            <td>[1 2 3 4 :a :b :c 1 2]</td>
          </tr>
          <tr class="row-one">
            <td class="row-label">Sets</td>
            <td>#{:a :b :c 1 2 3}</td>
          </tr>
          <tr>
            <td class="row-label">Scalars</td>
            <td>a-symbol, :a-keyword, "a string"</td>
          </tr>
          <tr class="row-one">
            <td class="row-label">Arrays</td>
            <td>(array 1 2 3)</td>
          </tr>
        </table>
      </div><!-- /cheat-box -->
      <div class="cheat-box">
        <h4>Functions</h4>
        <table>
          <tr class="row-one">
            <td class="row-label">Calling</td>
            <td>(<span class="ebnf">&lt;function&gt;</span>
	         <span class="ebnf">&lt;args*&gt;</span>)</td>
          </tr>
          <tr>
            <td class="row-label">Defining named functions</td>
            <td>(defn <span class="ebnf">&lt;name&gt;</span> 
                  [<span class="ebnf">&lt;args*&gt;</span>]
	          <span class="ebnf">|constraints|</span>
                  <span class="ebnf">&lt;actions*&gt;</span>)</td>
          </tr>
          <tr class="row-one">
            <td class="row-label">Anonymous function</td>
            <td>(fn <span class="ebnf">|name|</span>
                  [<span class="ebnf">&lt;args*&gt;</span>]
	          <span class="ebnf">|constraints|</span> 
                  <span class="ebnf">&lt;actions*&gt;</span>)</td>
          </tr>
          <tr>
            <td class="row-label">Anonymous inline function</td>
            <td>#(<span class="ebnf">&lt;action&gt;</span>
	          <span class="ebnf">|%,%2,%3, or %&|</span>)</td>
          </tr>
        </table>
      </div><!-- /cheat-box -->
      <div class="cheat-box">
        <h4>Useful Macros</h4>
        <table>
          <tr class="row-one">
            <td class="row-label">Conditionals</td>
            <td>if if-let cond condp and or when when-let</td>
          </tr>
          <tr>
            <td class="row-label">Nesting, chaining, and Interop</td>
            <td>-> ->> doto .. .</td>
          </tr>
          <tr class="row-one">
            <td class="row-label">Defining things</td>
            <td>def defn fn let binding defmulti defmethod deftype defrecord reify this-as</td>
          </tr>
	</table>
      </div>
    </div><!-- /cheat-box-container -->

    <div class="cheat-box-container eight columns">
      <div class="cheat-box">
        <h4>Useful Functions</h4>
        <table>
          <tr class="row-one">
            <td class="row-label">Math</td>
            <td>+ - * / quot rem mod inc dec max min</td>
          </tr>
          <tr>
            <td class="row-label">Comparison</td>
            <td>= == not= < > <= >=</td>
          </tr>
          <tr class="row-one">
            <td class="row-label">Predicates</td>
            <td>nil? identical? zero? pos? neg? even? odd? true? false?</td>
          </tr>
          <tr>
            <td class="row-label">Data processing</td>
            <td>map reduce filter partition split-at split-with</td>
          </tr>
          <tr class="row-one">
            <td class="row-label">Data create</td>
            <td>vector vec hash-map set for list list*</td>
          </tr>
          <tr>
            <td class="row-label">Data inspection</td>
            <td>first rest get get-in keys vals count get nth contains? find</td>
          </tr>
          <tr class="row-one">
            <td class="row-label">Data manipulation</td>
            <td>seq into conj cons assoc assoc-in dissoc zipmap merge merge-with select-keys update-in</td>
          </tr>
          <tr>
            <td class="row-label">Arrays</td>
            <td>first rest get get-in keys vals count get nth contains? find</td></td>
          </tr>
        </table>
      </div><!-- /cheat-box -->
      <div class="cheat-box">
        <h4>JavaScript Interop</h4>
        <table>
          <tr class="row-one">
            <td class="row-label">Method call</td>
            <td>(.the-method target-object args...)</td>
          </tr>
          <tr>
            <td class="row-label">Property access</td>
            <td>(.-property target-object -property)</td>
          </tr>
          <tr class="row-one">
            <td class="row-label">Property setting</td>
            <td>(set! (.-title js/document) "Hi!")</td>
          </tr>
          <tr>
            <td class="row-label">Direct JavaScript</td>
            <td>(js/alert "Hello Cleveland!")</td>
          </tr>
          <tr class="row-one">
            <td class="row-label">External library use</td>
            <td>(.text (js/jQuery "#title") "ClojureScript Rocks!")</td>
          </tr>
	</table>
      </div>
    </div><!-- /cheat-box-container -->
        
    <div class="rule sixteen columns"></div>
    
    <div class="column footer-logo">
        <div>cljs-bootstrap &copy; 2015 David Nolen and Joel Martin</div>
        <div>Himera design &copy; 2012-2013 <a ref="http://www.fogus.me">Fogus</a>, <a href="http://jenmyers.net/">Jen Myers</a> and <a href="http://www.thinkrelevance.com">Relevance Inc.</a></div>
    </div>
    
  </div><!-- / container -->
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="text/javascript" src="web/jqconsole.min.js"></script>
  <script type="text/javascript" src="web/jq_readline.js"></script>
  <script type="text/javascript" src="web/repl-web.js"></script>
  <script>
    global = this;
    $(function() {

      // Creating the console.
      window.jqconsole = $('#console').jqconsole(null, 'cljs-bootstrap.repl> ');

      cljs.core._STAR_print_fn_STAR_ = function () {
        var str = Array.prototype.join.call(arguments, " ")
        jqconsole.Write(str + "\n", 'jqconsole-output');
      }

      jq_load_history(jqconsole);

      // Abort prompt on Ctrl+C.
      jqconsole.RegisterShortcut('C', function() {
        jqconsole.AbortPrompt();
        handler();
      });
      // Move to line start Ctrl+A.
      jqconsole.RegisterShortcut('A', function() {
        jqconsole.MoveToStart();
        handler();
      });
      // Move to line end Ctrl+E.
      jqconsole.RegisterShortcut('E', function() {
        jqconsole.MoveToEnd();
        handler();
      });
      jqconsole.RegisterMatching('{', '}', 'brace');
      jqconsole.RegisterMatching('(', ')', 'paren');
      jqconsole.RegisterMatching('[', ']', 'bracket');
      jqconsole.RegisterMatching('"', '"', 'dquote');
      // Handle a command.
      var handler = function(line) {
        if (line) {
          try {
            jqconsole.Write(cljs_bootstrap.repl.read_eval(line) + '\n', 'jqconsole-return');
          } catch (exc) {
            //if (exc instanceof reader.BlankException) { return; }
            if (exc.stack) {
              jqconsole.Write(exc.stack + '\n', 'jqconsole-error');
            } else {
              jqconsole.Write(exc + '\n', 'jqconsole-error');
            }
          }
          jq_save_history(jqconsole);
        }
        jqconsole.Prompt(true, handler);
        /*
        jqconsole.Prompt(true, handler, function(command) {
          // Continue line if can't compile the command.
          try {
            Function(command);
          } catch (e) {
            if (/[\[\{\(]$/.test(command)) {
              return 1;
            } else {
              return 0;
            }
          }
          return false;
        });
      */
      };

      // Initiate the first prompt.
      handler();
    });
  </script>

</body>
</html>
